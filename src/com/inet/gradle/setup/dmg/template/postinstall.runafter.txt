# if there is a setup or something else to be started, do so now
JAVAEXECUTABLE=`find "$TARGET_LOCATION/{{displayName}}.app/Contents" -name "java" -type f`
RUNAFTER_MAINJAR="{{mainJar}}"
RUNAFTER_MAINCLASS="{{mainClass}}"
RUNAFTER_WORKINGDIR="{{workingDir}}"

# this is to be inteded with an embedded JRE and existing jars only
if [ ! -z "$JAVAEXECUTABLE" ]; then
	
	if [ -z "$RUNAFTER_WORKINGDIR" ]; then
		RUNAFTER_WORKINGDIR="$TARGET_LOCATION/{{displayName}}.app/Contents/Java"
	fi
	
	if [ -z "$RUNAFTER_MAINCLASS" ]; then
		$(cd "$RUNAFTER_WORKINGDIR" && "$JAVAEXECUTABLE" -jar "$RUNAFTER_MAINJAR" )&
	else
		$(cd "$RUNAFTER_WORKINGDIR" && "$JAVAEXECUTABLE" -classpath "$RUNAFTER_MAINJAR" "$RUNAFTER_MAINCLASS" )&
	fi
fi
